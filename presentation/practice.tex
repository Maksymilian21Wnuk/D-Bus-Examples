



%\begin{frame}
%    \frametitle{Co możemy implementować?}
%    Istnieje wiele interfejsów z możliwością implementacji.
%    Przykładowe API do implementacji:
%    \begin{itemize}
%        \item Interfejsy standardowe
%        \item \href{https://specifications.freedesktop.org/mpris-spec/latest/}{Standard MPRIS}-odtwarzacze muzyki
%    \end{itemize}
%\end{frame}

\begin{frame}[fragile]
    \frametitle{XML}
    \lstset{
    basicstyle=\tiny\ttfamily, 
    breaklines=true,           
    breakatwhitespace=true,    
    stepnumber=1               
}
    \begin{lstlisting}
    <node>
        <interface name="org.meks.Logger">
            <method name="AddLog">
                <arg direction="in"  type="s" name="log_str" />
                <arg direction="out" type="s" />
            </method>
            <signal name="CountChange">
                <arg type="(ib)" name="count" />
            </signal>
            <property name="Upper" type="b" access="readwrite"/>
            <property name="LogCount" type="i" access="read" />
            <property name="LogFileName" type="s" access="readwrite"/>
        </interface>
    </node>

    \end{lstlisting}
\end{frame}


\begin{frame}
    \frametitle{Policy XML}
    Kontrola dostępu do serwisów, metod i sygnałów.
    Znajduje się w /etc/dbus-1/system.d lub /usr/share/dbus-1/system.d

    Przykład: NetworkManager.conf
\end{frame}



\begin{frame}
    \frametitle{Narzędzia}
    \begin{itemize}
        \item dbus-monitor - debugger do monitorowania wiadomości dbusa
        \item dbus-send - wysyłanie wiadomości do busy
        \item d-feet - graficzny debugger do sprawdzania
        serwisów i wysyłania wiadomości
        \item busctl - komenda do badania serwisów
        \item gdbus-codegen - generowanie kodu w C, biblioteka GDbus
    \end{itemize}
\end{frame}

\begin{frame}
    \frametitle{Implementacje, Bindingi}
    Freedesktop.org oferuje implementacje i bindingi protokołu w D-Bus. Najciekawsze:
    \begin{itemize}
        \item libdbus - niskopoziomowe API w C, nie polecane do pisania 
        prostych aplikacji
        \item GDbus - niezależna od libdbus implementacja d-bus w C
        \item pydbus - wysokopoziomowy wrapper w pythonie na podstawie GDbus
        \item zbus, DBus-Java i inne
    \end{itemize}
\end{frame}


\begin{frame}
    \frametitle{Podsumowanie}
    \begin{itemize}
        \item IPC służące do wykonywania metod 
        i nasłuchiwania sygnałów serwisów
        \item Serwisy składające się z obiektów implementujących interfejsy
        z definicjami sygnałów, metod i właściwości(properties)
        \item Dobre do wymiany pojedynczych wiadomości, kontrola
        \item Fatalne do wymiany danych, szczególnie dużych
        \item Walidacja typów i autoryzacja dzięki security policy
    \end{itemize}
\end{frame}